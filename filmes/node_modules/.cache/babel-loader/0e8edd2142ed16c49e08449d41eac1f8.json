{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\senai\\\\Desktop\\\\React-JS\\\\filmes\\\\src\\\\pages\\\\home\\\\filme\\\\index.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport Footer from '../../../components/footer';\nimport Header from '../../../components/header/index';\nimport imgRefresh from '../../../assets/images/refresh.png';\nimport imgTrash from '../../../assets/images/trash.png';\nimport imgTheater from '../../../assets/images/theater.png';\nimport '../filme/style.css';\nimport Input from '../../../components/input';\nimport Button from '../../../components/button';\n\nfunction Filme() {\n  //prop string genero {get; set;} = \"\";\n  const [idFilme, setIdFilme] = useState(0);\n  const [Filme, setFilme] = useState('');\n  const [Filmes, setFilmes] = useState([]);\n  const [genero, setGenero] = useState('');\n  const [generos, setGeneros] = useState([]); //useEffect te permite executar efeitos colaterais em componentes funcionais\n  //Buscar dados é um exemplo de efeito colateral\n  //usando o useEffect informo ao React que o componente somente depois da renderização\n  //é executado depois da renderização do componente, quando ele já estiver montado na DOM\n\n  useEffect(() => {\n    listar();\n    listarGeneros();\n  }, []);\n\n  const listarGeneros = () => {\n    fetch('http://localhost:5000/api/Filmes', {\n      method: 'GET',\n      headers: {\n        //Bearer authentication é o token authentication, um Schema para autenticação HTTP \n        //O Bearer identifica recursos protegidos por um OAuth2.\n        authorization: 'Bearer ' + localStorage.getItem('token-filmes')\n      }\n    }).then(response => response.json()).then(dados => {\n      setGeneros(dados);\n    }).catch(err => console.error(err));\n  };\n\n  const listar = () => {\n    fetch('http://localhost:5000/api/Filmes', {\n      method: 'GET',\n      headers: {\n        //Bearer authentication é o token authentication, um Schema para autenticação HTTP \n        //O Bearer identifica recursos protegidos por um OAuth2.\n        authorization: 'Bearer ' + localStorage.getItem('token-filmes')\n      }\n    }).then(response => response.json()).then(dados => {\n      setFilmes(dados);\n    }).catch(err => console.error(err));\n  };\n\n  const trash = id => {\n    if (window.confirm('Deseja excluir o Filme?')) {\n      fetch('http://localhost:5000/api/generos/' + id, {\n        method: 'DELETE',\n        headers: {\n          authorization: 'Bearer ' + localStorage.getItem('token-filmes')\n        }\n      }).then(response => response.json()).then(dados => {\n        listar();\n      }).catch(err => console.error(err));\n    }\n  };\n\n  const refresh = id => {\n    fetch('http://localhost:5000/api/Filme/' + id, {\n      method: 'GET',\n      headers: {\n        authorization: 'Bearer ' + localStorage.getItem('token-filmes')\n      }\n    }).then(response => response.json()).then(dados => {\n      setIdFilme(dados.idGenero);\n      setFilme(dados.Titulo);\n    }).catch(err => console.error(err));\n  };\n\n  const salvar = () => {\n    const form = {\n      titulo: Filme\n    };\n    const method = idFilme === 0 ? 'POST' : 'PUT';\n    const urlRequest = idFilme === 0 ? 'http://localhost:5000/api/Filme' : 'http://localhost:5000/api/Filme/' + idFilme;\n    fetch(urlRequest, {\n      method: method,\n      body: JSON.stringify(form),\n      headers: {\n        'content-type': 'application/json',\n        authorization: 'Bearer ' + localStorage.getItem('token-filmes')\n      }\n    }).then(() => {\n      alert('Filme cadastrado');\n      setIdFilme(0);\n      setFilme('');\n      listar();\n    }).catch(err => console.error(err));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    description: \"Faça o login e acesse a Coletânea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imgTitulo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }, \"G\\xEAnero\"), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"theater\",\n    src: imgTheater,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ListGenero\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 21\n    }\n  }, \"Lista de generos\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Tabela\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 29\n    }\n  }, Filmes.map(item => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: item.idFilme,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 49\n      }\n    }, item.idFilme), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"nometd\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 49\n      }\n    }, item.titulo), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"icon\",\n      src: imgRefresh,\n      onClick: () => refresh(item.idFilme),\n      alt: \"Atualizar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 53\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      className: \"icon\",\n      src: imgTrash,\n      onClick: () => trash(item.idFilme),\n      alt: \"Deletar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 53\n      }\n    })));\n  })))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: event => {\n      event.preventDefault();\n      salvar();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"filme\",\n    label: \"Cadastrar filme\",\n    value: Filme,\n    onChange: e => setFilme(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"filme\",\n    onChange: e => setGneroe(e.target.value),\n    value: Filme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 33\n    }\n  }, \"Selecione um G\\xEAnero\"), generos.map(item => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      value: item.idGenero,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 48\n      }\n    }, item.nome);\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    value: \"Salvar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 33\n    }\n  })))))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default Filme;","map":{"version":3,"sources":["C:/Users/senai/Desktop/React-JS/filmes/src/pages/home/filme/index.tsx"],"names":["React","useEffect","useState","Footer","Header","imgRefresh","imgTrash","imgTheater","Input","Button","Filme","idFilme","setIdFilme","setFilme","Filmes","setFilmes","genero","setGenero","generos","setGeneros","listar","listarGeneros","fetch","method","headers","authorization","localStorage","getItem","then","response","json","dados","catch","err","console","error","trash","id","window","confirm","refresh","idGenero","Titulo","salvar","form","titulo","urlRequest","body","JSON","stringify","alert","map","item","event","preventDefault","e","target","value","setGneroe","nome"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Footer from '../../../components/footer';\r\nimport Header from '../../../components/header/index';\r\nimport imgRefresh from '../../../assets/images/refresh.png';\r\nimport imgTrash from '../../../assets/images/trash.png';\r\nimport imgTheater from '../../../assets/images/theater.png';\r\nimport '../filme/style.css'\r\nimport Input from '../../../components/input';\r\nimport Button from '../../../components/button';\r\n\r\nfunction Filme() {\r\n    //prop string genero {get; set;} = \"\";\r\n    const [idFilme, setIdFilme] = useState(0);\r\n    const [Filme, setFilme] = useState('');\r\n    const [Filmes, setFilmes] = useState([]);\r\n    const [genero, setGenero] = useState('');\r\n    const [generos, setGeneros] = useState([]);\r\n\r\n    //useEffect te permite executar efeitos colaterais em componentes funcionais\r\n    //Buscar dados é um exemplo de efeito colateral\r\n    //usando o useEffect informo ao React que o componente somente depois da renderização\r\n    //é executado depois da renderização do componente, quando ele já estiver montado na DOM\r\n    useEffect(() => {\r\n        listar();\r\n        listarGeneros();\r\n    }, []);\r\n\r\n    const listarGeneros = () => {\r\n        fetch('http://localhost:5000/api/Filmes', {\r\n            method: 'GET',\r\n            headers: {\r\n                //Bearer authentication é o token authentication, um Schema para autenticação HTTP \r\n                //O Bearer identifica recursos protegidos por um OAuth2.\r\n                authorization: 'Bearer ' + localStorage.getItem('token-filmes')\r\n            }\r\n        })\r\n            .then(response => response.json())\r\n            .then(dados => {\r\n                setGeneros(dados);\r\n            })\r\n            .catch(err => console.error(err));\r\n    }\r\n\r\n    const listar = () => {\r\n        fetch('http://localhost:5000/api/Filmes', {\r\n            method: 'GET',\r\n            headers: {\r\n                //Bearer authentication é o token authentication, um Schema para autenticação HTTP \r\n                //O Bearer identifica recursos protegidos por um OAuth2.\r\n                authorization: 'Bearer ' + localStorage.getItem('token-filmes')\r\n            }\r\n        })\r\n\r\n            .then(response => response.json())\r\n            .then(dados => {\r\n                setFilmes(dados);\r\n            })\r\n            .catch(err => console.error(err));\r\n    }\r\n\r\n    const trash = (id: number) => {\r\n        if (window.confirm('Deseja excluir o Filme?')) {\r\n            fetch('http://localhost:5000/api/generos/' + id, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    authorization: 'Bearer ' + localStorage.getItem('token-filmes')\r\n                }\r\n\r\n            })\r\n                .then(response => response.json())\r\n                .then(dados => {\r\n                    listar();\r\n                })\r\n                .catch(err => console.error(err));\r\n        }\r\n    }\r\n\r\n    const refresh = (id: number) => {\r\n        fetch('http://localhost:5000/api/Filme/' + id, {\r\n            method: 'GET',\r\n            headers: {\r\n                authorization: 'Bearer ' + localStorage.getItem('token-filmes')\r\n            }\r\n        })\r\n            .then(response => response.json())\r\n            .then(dados => {\r\n                setIdFilme(dados.idGenero);\r\n                setFilme(dados.Titulo);\r\n            })\r\n            .catch(err => console.error(err));\r\n    }\r\n\r\n    const salvar = () => {\r\n        const form = {\r\n            titulo: Filme\r\n        };\r\n\r\n        const method = (idFilme === 0 ? 'POST' : 'PUT');\r\n        const urlRequest = (idFilme === 0 ? 'http://localhost:5000/api/Filme' : 'http://localhost:5000/api/Filme/' + idFilme);\r\n\r\n        fetch(urlRequest, {\r\n            method: method,\r\n            body: JSON.stringify(form),\r\n            headers: {\r\n                'content-type': 'application/json',\r\n                authorization: 'Bearer ' + localStorage.getItem('token-filmes')\r\n            }\r\n        })\r\n            .then(() => {\r\n                alert('Filme cadastrado');\r\n                setIdFilme(0);\r\n                setFilme('');\r\n                listar();\r\n            })\r\n            .catch(err => console.error(err));\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Header description={\"Faça o login e acesse a Coletânea\"} />\r\n            <main>\r\n                <div className=\"imgTitulo\">\r\n                    <h2>Gênero</h2>\r\n                    <img className=\"theater\" src={imgTheater} alt=\"\" />\r\n                </div>\r\n                <div className=\"ListGenero\">\r\n                    <h3>Lista de generos</h3>\r\n                    <div className=\"Tabela\">\r\n                        <table>\r\n                            <tbody>\r\n                                {\r\n                                    Filmes.map((item: any) => {\r\n                                        return (\r\n                                            <tr key={item.idFilme}>\r\n                                                <td>{item.idFilme}</td>\r\n                                                <td className=\"nometd\">{item.titulo}</td>\r\n                                                <td>\r\n                                                    <img className=\"icon\" src={imgRefresh} onClick={() => refresh(item.idFilme)} alt=\"Atualizar\" />\r\n                                                    <img className=\"icon\" src={imgTrash} onClick={() => trash(item.idFilme)} alt=\"Deletar\" />\r\n                                                </td>\r\n                                            </tr>\r\n                                        )\r\n                                    })\r\n                                }\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    <form onSubmit={event => {\r\n                        event.preventDefault();\r\n                        salvar();\r\n                    }}>\r\n                        <div className=\"form\">\r\n                            <Input name=\"filme\" label=\"Cadastrar filme\" value={Filme} onChange={e => setFilme(e.target.value)} />\r\n                            <select name=\"filme\" onChange={e => setGneroe(e.target.value)} value={Filme}>\r\n                                <option value=\"0\">Selecione um Gênero</option>\r\n                                {\r\n                                    generos.map((item: any) => {\r\n                                        return <option value={item.idGenero}>{item.nome}</option>\r\n                                    })\r\n                                }\r\n                            </select>\r\n                            <div className=\"btn\">\r\n                                <Button value=\"Salvar\" />\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </main>\r\n            <Footer />\r\n        </div>\r\n    );\r\n}\r\nexport default Filme;"]},"metadata":{},"sourceType":"module"}